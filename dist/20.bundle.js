(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{681:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",{staticClass:"userAd-title"},[t._v("所有用户")]),t._v(" "),s("div",t._l(t.alluserlist,(function(e){return s("div",{key:e.id,staticClass:"mui-card"},[s("div",{staticClass:"mui-card-content"},[s("div",{staticClass:"mui-card-content-inner"},[s("p",[t._v("用户名："+t._s(e.username))]),t._v(" "),s("p",[t._v("E-mail："+t._s(e.email))]),t._v(" "),s("p",[t._v("联系电话："+t._s(e.phone))]),t._v(" "),s("p",[t._v("用户权限："+t._s(e.userps))])])]),t._v(" "),s("div",{staticClass:"mui-card-footer"},[s("button",{staticClass:"mui-btn mui-btn-primary",attrs:{type:"button"},on:{click:function(s){return t.changepwd(e.id)}}},[t._v("\n                    密码重置\n                ")]),t._v(" "),s("button",{staticClass:"mui-btn mui-btn-danger",attrs:{type:"button"},on:{click:function(s){return t.deluser(e.id)}}},[t._v("\n                    删除用户\n                ")]),t._v(" "),s("button",{staticClass:"mui-btn mui-btn-royal",attrs:{type:"button"},on:{click:function(s){return t.addroot(e.id)}}},[t._v("\n                    添加管理权限\n                ")])])])})),0)])};n._withStripped=!0;var a=s(129),o=s(691),i={name:"user",data:()=>({alluserlist:[],newpwd:""}),methods:{getalluser(){let t=Object(o.b)("username");this.$http.get("api/Adgetalluser").then(e=>{200===e.status&&(this.alluserlist=e.body.message.results,this.alluserlist.forEach((e,s)=>{e.username===t&&this.alluserlist.splice(s,1),"1"===e.userps?e.userps="普通用户":"admin"===e.userps&&(e.userps="管理员")}))})},changepwd(t){var e="";this.alluserlist.forEach(s=>{s.id!==t||(e=s)});let s={username:e.username,phone:e.phone};console.log(e),console.log(s),this.$http.post("api/adrebootpwd",s).then(t=>{200===t.status?Object(a.Toast)({message:"重置密码成功，初始密码为：1234",duration:4e3}):Object(a.Toast)({message:"重置密码失败请重试",duration:3e3})})},deluser(t){var e="";this.alluserlist.forEach((s,n)=>{s.id===t&&(e=s,this.alluserlist.splice(n,1))});let s={username:e.username,password:e.password,phone:e.phone};this.$http.post("api/deluserad",s).then(t=>{200===t.status&&Object(a.Toast)({message:"删除用户成功",duration:3e3})})},addroot(t){var e="";if(this.alluserlist.forEach(s=>{s.id!==t||(e=s)}),"普通用户"!==e.userps)return void Object(a.Toast)({message:"用户已经是管理员",duration:3e3});e.userps="admin";let s={username:e.username,password:e.password,phone:e.phone};this.$http.post("api/adaddroot",s).then(t=>{200===t.status&&Object(a.Toast)({message:"添加管理权限成功",duration:3e3})}),console.log(e),this.getalluser()}},created(){this.getalluser()}},r=(s(795),s(128)),u=Object(r.a)(i,n,[],!1,null,"c5d0a88a",null);u.options.__file="src/components/root/userAd.vue";e.default=u.exports},691:function(t,e,s){"use strict";function n(t,e,s){var n=new Date;n.setSeconds(n.getSeconds()+s),document.cookie=t+"="+escape(e)+"; expires="+n.toGMTString(),console.log(document.cookie)}function a(t){if(document.cookie.length>0){let e=document.cookie.indexOf(t+"=");if(-1!=e){e=e+t.length+1;let s=document.cookie.indexOf(";",e);return-1==s&&(s=document.cookie.length),unescape(document.cookie.substring(e,s))}}return""}function o(t){n(t,"",-1)}s.d(e,"c",(function(){return n})),s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return o}))},720:function(t,e,s){var n=s(55),a=s(796);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1},i=(n(a,o),a.locals?a.locals:{});t.exports=i},795:function(t,e,s){"use strict";var n=s(720);s.n(n).a},796:function(t,e,s){(e=s(56)(!1)).push([t.i,"\n.userAd-title[data-v-c5d0a88a]{\n    font-size: 25px;\n    text-align: center;\n    color: #555555;\n}\n\n",""]),t.exports=e}}]);